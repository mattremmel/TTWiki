<!DOCTYPE html>
<html lang="en" ng-app="ContentTopicApp" ng-cloak ng-init="editMode = false">

<head>
    <meta charset="UTF-8">
    <title>Content Topic</title>
    <style>
        [ng\:cloak], [ng-cloak], .ng-cloak { display: none; }
    </style>
</head>

<body ng-controller="ContentTopicController">

    <h3>{{topicData.type}}</h3>
    <p>
        <button ng-if="!editMode" ng-click="startEditMode()">Edit</button>
        <button ng-if="editMode" ng-click="cancelEditMode();">Cancel</button>
        <button ng-if="editMode" ng-click="saveContentTopic()">Save</button>
    </p>

    <div ng-repeat="(groupIndex, group) in topicData.snippetGroups" ng-show="(group.snippets | filter:filterSnippets()).length" >

        <!-- TODO: Can break out snippet types into partials to be loaded with contained content -->
        <h4>{{group.title}}</h4>

            <span ng-repeat="(snippetIndex, snippet) in group.snippets | filter:filterSnippets()" >
                <p>
                    <!-- Revealed Checkbox -->
                    <input type="checkbox" ng-model="snippet.revealed" />

                    <!-- Labels for Normal Mode -->
                    <span ng-show="!editMode" >{{snippet.title}}</span>
                    <span ng-show="!editMode" >{{snippet.content}}</span>

                    <!-- Input Boxes for Edit Mode -->
                    <input type="text" ng-show="editMode" ng-model="snippet.title" />
                    <input type="text" ng-show="editMode" ng-model="snippet.content" />
                    <button ng-show="editMode" ng-click="deleteSnippet(groupIndex, snippetIndex)" >Delete</button>
                </p>
            </span>

        <!--  -->
        <button ng-show="editMode" ng-click="addTextSnippet($index)" >Add</button>
        <br>
    </div>

    <button ng-show="editMode" ng-click="saveContentTopic()">Save</button>

</body>

    <script src="../lib/angular.js"></script>
    <script src="../js/ContentTopicApp.js"></script>
    <script src="../js/ContentTopicControllers.js"></script>
    <script src="../js/ContentTopicServices.js"></script>

</html>